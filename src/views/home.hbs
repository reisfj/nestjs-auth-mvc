<h1>Bem-vindo à Home</h1>
<ul id="users-list"></ul>

<script>
  async function fetchUsers() {
    const token = localStorage.getItem('token');
    if (!token) {
      alert('Token não encontrado, por favor faça login novamente.');
      window.location.href = '/login';
      return;
    }

    console.log('Token:', token); // Adicione este log

    const response = await fetch('/api/users', {
      headers: { 'Authorization': `Bearer ${token}` },
    });

    if (response.ok) {
      const users = await response.json();
      const usersList = document.getElementById('users-list');
      usersList.innerHTML = '';
      users.forEach(user => {
        const li = document.createElement('li');
        li.textContent = user.fullName;
        usersList.appendChild(li);
      });
    } else {
      alert('Failed to fetch users');
      console.log('Failed to fetch users:', response.statusText); // Adicione este log
    }
  }

  fetchUsers();
</script>
